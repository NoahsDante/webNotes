# 为什么需要同构JavaScript

构建客户端 Web 应用的最大劣势在于，首次加载需要付出高昂的代价下载一个 JavaScript 大文件。互联网中的主要传输协议是 TCP（Transmission Control Protocol，传输控制协议），该协议定义了一种被称为**慢启动**（slow start）的拥塞控制机制，这意味着数据是以逐渐增加数据块的方式进行发送

## 选择同构的理由

1. 对于同一个渲染周期，**客户端和服务器端可以使用同一套代码**。这意味着**不需要重复劳动**，可以在降低界面开发与维护成本的同时提高团队开发速度
2. 在服务器端渲染一份初始的 HTML 代码后，用户会感觉网页的加载速度更快，这是因为用户可以在浏览器中先看见首屏渲染的内容，而**无须等待应用资源的加载和数据抓取完成**。在网络延迟比较严重的环境中，这种改进页面预加载的方式尤为重要
3. **同构应用支持 SEO**，因为同构应用使用的 URL 不包含 # 号片段。此外，在那些**不支持 History API** 的浏览器中，它可以（对后续的每次请求）**优雅地降级为服务器端渲染的方式**
4. 在**支持 History API** 的浏览器中，同构应用使用了 **SPA 模型的分布式渲染**，因此后续请求可以减轻服务器负载
5. 无论是在服务器端还是在客户端，UI 工程师都可以完全掌控界面（<https://www.nczonline.net/blog/2013/10/07/node-js-and-the-new-web-front-end/>），而且同构应用在前后端之间划分了明确的界限，这有助于降低操作成本

## 定义同构JavaScript

浏览器客户端和 **Web 应用服务器端间共享同一套 JavaScript 代码的应用**

## Web应用架构方案

### 工程上的关注点

1. 可**维护性和效率;**
2. 能够**收录在搜索引擎中**
3. **首屏加载速度**应该是优化过的，也就是说，**关键渲染路径**（critical rendering path）(页面上与用户的主要操作相关的内容)应该属于初始响应的一部分
4. 能够**响应用户的交互操作**（比如优化后的网页切换）

### 传统的 Web 应用

