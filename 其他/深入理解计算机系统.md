## 计算机系统漫讲

### 信息就是位 + 上下文

系统中所有的信息，都是**由一串比特表示的。区分不同数据对象的唯一方法就是读到这些数据对象时的上下文。**

### 程序被其他程序翻译成不同的格式

从源程序到目标文件的转化是由编译器完成的；

由四个阶段完成

#### 预处理阶段

根据以字符#开头的命令，读取**系统文件对应需要引用的库，并把它直接插入程序文本中**。结果得到另一个c程序。通常是.i作为文件扩展名。

#### 编译阶段

包含**汇编语言程序**。每条语句都以一种文本格式描述了一条低级机器语言指令。它为不同高级语言的不同编译器提供了通用的输出语言。

#### 汇编阶段

将翻译成机器语言指令，把这些指令打包成一种可重定为目标程序的格式，并将结果保存在目标文件中。现在该文件内容是**二进制**文件。

#### 连接阶段

如果该文件中有使用其他函数；那么这些函数是每个c编译器都提供标准C库的函数。这些函数库是存在某个文件中；**所以这些文件必须以某种方式合并到目标程序中。**

### 处理器读并解读存在内存中的指令

#### 系统的硬件组成

1. 总线

> 贯穿整个系统的是一组电子管道；它**将携带信息字接并负责在各个部件间传递**。
>
> 通常总线被设计成传送定长的字节块，就是字；字中的字节数是一个基本的系统参数，如32位、64位

2. I/O设备

> 是系统与外部世界的联系通道。用户输入的键盘和鼠标，显示屏，以及用于长期存储数据和程序的磁盘驱动器。
>
> 每个I/O设备都通过一个**控制器或适配器与I/O总线相连**；其中控制器与适配器的区别；控制器是**I/O设备本身或者是系统的主印制电路板上的芯片组**；而适配器则是一块插在**主板插槽上的卡**。 

![](https://raw.githubusercontent.com/NoahsDante/webNotes/master/其他/img/1.png))

3. 主存

> 是一个临时存储设备，**在处理执行程序时，用来存放程序和程序处理的数据**。从物理来说，主存时有一组动态随机存取存储器芯片组成。从逻辑来说，存储器是一个线性的字节数组，每个字节都有其唯一的地址，这些地址是从零开始的。

5. 处理器

> 中央处理单元，简称处理器，**是解释或执行存储在主存中指令的引擎**。处理器的核心是一个大小为一个字的存储设备，称为程序计数器。

#### 存储设别形成层次结构

![](https://raw.githubusercontent.com/NoahsDante/webNotes/master/其他/img/2.png))

存储器层次结构的主要思想是上一层的存储器作为低一层存储器的高速缓存。

### 操作系统管理硬件

当执行某个程序时，都没直接方为键盘，显示屏，磁盘或者主存，取而代之的是，它们依靠操作系统提供的服务。可以把操作系统看成是应用程序和硬件之间插入的一层软件。所有应用程序对硬件的操作都必须通过操作系统。
![](https://raw.githubusercontent.com/NoahsDante/webNotes/master/其他/img/3.png)

文件是对I/O设备的抽；
虚拟内存是对主存和磁盘I/O设备的抽象；
进程是对处理器、主存和I/O设备的抽象)

#### 进程
进程是操作系统对一个正在运行的程序的一种抽象。
操作系统保存跟踪运行所需的所有状态信息，这种状态叫做上下文。

#### 线程
一个进程可以由多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据。

#### 虚拟内存
是一个抽象概念，**他为每个进程提供了一个假象，即每个进程都在独占地使用主存**。每个进程看到的内存都是一致的，称为虚拟内存。

基本思想是把一个进程虚拟内存的内容存储在磁盘上，然后用主存作为磁盘的高速缓存。

#### 文件

就是字节序列；他向应用程序提供了一个统一的视图，来看待系统中可能含有的所有各式各样的I/O设备。

## 信息的表示和处理

### 信息存储

#### 字数据的大小

 每台计算机都有一个字长，指明**指针数据的标称大小**，这是虚拟地址是以这样一个字长编码的，所以字长决定的最重要的系统参数就是虚拟地址空间大小。

## 程序的机器级表示



## 处理器体系结构

## 优化程序性能

## 存储器层次结构

## 连接

## 异常控制流

## 虚拟内存

## 系统级I/O

## 网络编程

## 并发编程

