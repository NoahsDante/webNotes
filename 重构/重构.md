# 重构原则

## 何时重构

#### 重构（名词）

对软件内部的一种调整，目的是在**不改变软件可观察行为下的前提下，提高其可理解性，降低其修改成本**

#### 重构（动词）

使用一系列**重构手法**，在不改变软件可观察行为的前提下，**调整其结构**

#### 更容易理解和修改

在软件内部做很多修改，但必须对软件可观察的外部行为**只造成很小变化，甚至不造成变化**。并且达到性能优化

#### 不改变软件可观察的行为

任何用户，都不知道已经有**东西发生了变化**

### 两顶帽子

使用重构技术开发软件时，把自己的时间分配给两种截然不同的行为：**添加功能新功能、重构**

- 添加新功能时：**不应该修改既有的代码**，只管添加新功能，并且通过测试
- 重构：**不能添加新功能**，只管改进程序结构

## 为何重构

#### 改进软件设计

重构很像是在整理代码，让所有东西回到应处的位置上；代码结构的流失是累积性。

常常是因为代码在不同的地方使用完全相同的语句做同样的事；**消除重复代码**是优秀设计的根本。

#### 使软件更容易理解

可理解性还有另一方面：可以利用重构理解不熟悉的代码；不仅仅会看而且会真正动手去修改代码，让它更好地反映出我的理解，然后执行，是否正常运行，检验自己的理解是否正确

#### 帮助找到bug

对代码的理解，可以快速到bug

#### 提高编程速度

良好的设计是快速开发的根本 - 如果没有良好的设计，或许某一段时间内是可以迅速进展，但是恶劣的设计很快就让你慢下来，会把时间花到调试，无法添加新功能。修改时间越长，就必须花越多的时间去理解系统，寻找重复代码。

## 何时重构

**事不过三原则，三则重构**

### 添加功能

是否能对**这段代码进行重构，使我能更快地理解它。然后我就会重构**

### 修补错误时

调试过程中运用重构，多半是为了让代码更具**可读性**；让能一眼看出bug

### 复审代码

可以改善开发状况。这种活动有助于在开发团队中传播知识，也有助于让较有经验的开发者把知识传递给比较欠缺经验的人，并帮助更多人理解大型软件系统中的更多部分；

## 重构的难题

# 代码坏味道

# 重构列表

# 重新组织函数

# 重新组织数据

# 简化条件表达式

# 简化函数调用

# 处理概括关系

# 重构，复用与实现



